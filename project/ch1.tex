\chapter[Вероятностни пространства. Теорема за продължение на вероятността]
{Вероятностни пространства.\\Теорема за продължение на вероятността}\label{ch:1}

От елементарната теория на вероятностите читателят е запознат с модели,
позволяващи ни да дадем вероятностно описание на опити, имащи краен или
изброим брой изходи. Тези вероятностни модели описват добре всички задачи
при хазартните игри и други аналогични на тях постановки.

Един такъв модел се задава с тройката $\OFP$, където $\gO$ е крайно или
изброимо множество (пространство) от елементарни събития $\go$ , а $\calF$
е съвкупността от всички подмножества на $\gO$. На всяко $\go\in\gO$
съпоставяме неотрицателно число $\bbP(\go)$ така, че
\[
\sum_{\go\in\gO} \bbP(\go)=1
\]
и това число $\bbP(\go)$ се нарича вероятност на елементарното събитие
$\go$. Подмножествата на $\go$ се наричат събития. Вероятност на кое
да е събитие $A\in\calF$ се	определя с формулата
\[
\bbP(A)=\sum_{\go\in A} \bbP(\go).
\]
От това определение следват и всички елементарни свойства на вероятността
$\bbP$. Предполагаме, че те са известни на читателя.

Например, тройката	$(\gO^n,\calF_n,\bbP_n)$, където $\gO=\{0,1\}$,
$\gO^n=\{\go^n\colon \go^n=(\go_1,\dots,\go_n), \go_i=0\text{ или }1,
i=1,\dots,n$, $\calF^n=\{A\colon A\subseteq\gO^n\}$, $\bbP_n(\go^n)=2^{-n}$,
$n\ge 1$, е вероятностен модел на $n$ последователни бернулиеви опита с
вероятност за сбъдване $p=\frac12$ на дадено събитие при всеки отделен опит.
Броят на всички елементарни събития $\go^n$ в този случай е $2^n$, колкото
са всички възможни набори $\go^n=(\go_1,\dots,\go_n)$ от 0 или 1.

Пространството $\gO^\infty=\{\go\colon \go=(\go_1,\go_2,\dots)\}$ от безкрайни
редици $\go$ от нули и единици е естествен модел на изходите от безбройно много
последователни опити на Бернули. Но то не е нито крайно, нито изброимо.
Наистина, всяко реално число $x\in[0,1]$ може да се представи като двоична дроб
\[
x=\tilde{\go}=\frac{\go_1}2+\frac{\go_2}{2^2}+\frac{\go_3}{2^3}+\cdots
\]
(за двоично-рационалните числа се взема по-краткото представяне) и
следователно мощността на $\gO^\infty$ е равна на мощността на континуума.
Елементарното събитие означава $\go$ "`избор на точката $x\in[0,1]$"'.

За да въведем в $\gO^\infty$ вероятност, запазваща свойствата на
модела с краен брой бернулиеви опити, естествено е да положим
$\bbP(A_n)=\bbP_n(\go^n)=2^{-n}$ за всяко събитие $A_n=\{$двоичният запис на
точката $x$ започва с цифрите $\go^n=(\go_1,\dots,\go_n)\}$, означаващо, че
първите $n$ опита са дали резултат $\go^n$,	$n\ge 1$. Но тогава за всяко
$\go\in A_n$ имаме $\bbP(\go)\le\bbP(A_n)=2^{-n}$, откъдето $\bbP(\go)=0$.
Съществени в тази ситуация се оказват събитията от вида
"`точката $x\in[\ga,\gb)$"'. Тъй като $A_n$ означава също, че
"`точката $x\in\tilde\go^n,\tilde\go+2^{-n})$"', а числата, които имат двоичен
запис с краен брой цифри, са навсякъде гъсто множество в $[0,1]$, лесно се
вижда, че $\bbP(\text{точката }x\in[\ga,\gb))=\gb-\ga$. Сега да си спомним, че
функцията, съпоставяща на всеки подинтервал неговата дължина, в анализа се
нарича мярка на Лебег в $[0,1]$. Следователно, модел на безбройно много
бернулиеви опити (с вероятност за успех $p=\frac12$) е пространството $[0,1]$
с вероятност "--- лебеговата мярка. Този пример подсказва, че дефинирането на
вероятност в по-сложните пространства зависи от такъв математически апарат,
какъвто са теорията на мерките и интегрирането.

В тази глава ще въведем понятието вероятност за общо пространство $\gO$ от
(повече от изброим брой) елементарни събития. Подмножествата на $\gO$, за
които тази вероятност ще се дефинира, ще наричаме събития.

\begin{dfn}\label{dfn:1.1}
Нека $\gO$ е съвкупността от елементарни събития $\go$.
Съвкупността $\frA$ от подмножества на $\gO$ се нарича алгебра,
ако:
\begin{enumerate}
\item
$\gO\in\frA$;
\item
от $A,B\in\frA$ следва $A\cup B\in\frA$, $A\cap B\in\frA$;
\item
от $A\in\frA$ следва $\ol A\in\frA$, $\ol A=\frA\setminus a=\{\go\colon \go\notin A\}$.
\end{enumerate}
\end{dfn}

В изискването~2 е достатъчно да фигурира само $A\cup B$ (или само $A\cap B$),
тъй като $A\cap B=\ol{\ol A\cup\ol B}$, $A\cup B=\ol{\ol A\cap\ol B}$.

Оказва се обаче, че за построяване на вероятностна теория не е достатъчно
да разглеждаме събитията като елементи на една алгебра $\frA$, а да
направим допълнителни ограничения на класовете от подмножества на $\gO$.
Това води до

\begin{dfn}\label{dfn1.2}
Системата $\calF$ от подмножества на $\gO$ се нарича $\gs$-алге\-бра,
ако $\calF$ е алгебра и освен това:
\begin{enumerate}[\indent2$^*$.]
\item
от $A_n\in\calF$, $n=1,2,\dots$, следва
$\bigcup\limits_{n=1}^\infty A_n\in\calF$,
$\bigcap\limits_{n=1}^\infty A_n\in\calF$.
\end{enumerate}
\end{dfn}

Както при определение~\ref{dfn:1.1}, достатъчно е да изискваме само
$\bigcup\limits_{n=1}^\infty A_n\in\calF$
(или само $\bigcap\limits_{n=1}^\infty A_n\in\calF$).

Двойката $(\gO,\calF)$, съставена от пространството $\gO$ (от елементарни
събития $\go$) и коя да е $\gs$-алгебра $\calF$ (от подмножества на $\gO$),
се нарича измеримо пространство.

Понятието вероятност се определя като изброимо-адитивна мярка, дефинирана
в алгебрата $\frA$. Тук ще дадем нужните определения, който са известни от
теорията на мерките.

\begin{dfn}\label{dfn1.3}
Нека $\frA$ е една алгебра от подмножества на $\gO$. Функцията $\mu(A)$,
$A\in\frA$,	вземаща стойности в интервала $[0,+\infty]$, се нарича
крайно-адитивна мярка в $\frA$, ако за всеки два елемента $A,B\in\frA$,
$A\cap B=\es$, имаме $\mu(A+B)=\mu(A)+\mu(B)$.
(За удобство тук и по-нататък обединението на множества без общи елементи
означавала с $+$ и $\sum$. Така $A=\sum\limits_{J\in J} A_j$ означава,
че $A=\bigcup\limits_{j\in J} A_j$ и $A_i\cap A_j=\es$, $i\ne j$, $i,j\in J$.)
\end{dfn}

Мярката $\mu$ се нарича крайна, ако	$\mu(\gO)<\infty$. Ако $\mu(\gO)=1$,
то $\mu$ се нарича крайно-адитивна вероятностна мярка. Оказва се, че за
построяване на плодотворна вероятностна теория е необходимо да ограничим
както класа на подмножествата на $\gO$, така и класа на вероятностите мерки.
За това се налага още и следното

\begin{dfn}\label{dfn:1.4}
Крайно-адитивната мярка $\mu$, определена в алгебрата $\frA$ от подмножества
на $\go$, се нарича изброимо-адитивна (или $\gs$-адитивна) мярка, ако за
произволна редица $A_1,A_2,\dots$ от (непресичащи се) елементи на $\frA$
такива, че $\sum\limits_{n=1}^\infty A_n\in\frA$, е изпълнено равенството
\[
\mu\left(\sum_{n=1}^\infty A_n\right)=\sum_{n=1}^\infty\mu(A_n).
\]
\end{dfn}

Крайно-адитивната мярка $\mu$ се нарича крайна, ако $\gO$ може да се
представи като сума ($\gO=\sum\limits_{n=1}^\infty\gO_n$) от непресичащи се
подмножества	 $\gO_n\in\frA$, за които $\mu(\gO_n)<\infty$, $n=1,2,\dots$

\begin{dfn}\label{dfn:1.5}
Изброимо-адитивната мярка $P$, определена в алгебрата $\frA$ и
нормирана с условието $P(\gO)=1$, се нарича вероятностна мярка или
вероятност.
\end{dfn}

Ще припомним без доказателство основните елементарни свойства на вероятностите,
известни от елементарния курс.
\begin{ena}
\item
$P(\es)=0$, където $\es$ е празното подмножество на $\gO$,
\te невъзможното събитие.
\item
Ако $A,B\in\frA$, то $P(A\cup B)=P(A)+P(B)-P(A\cap B)$.
\item
Ако $A\subseteq B$, то $P(A)\le P(B)$.
\item
Ако	$A_n\in\frA$, $n\ge 1$, и $\bigcup\limits_{n=1}^\infty A_n\in\frA$,
то $P\left(\bigcup\limits_{n=1}^\infty A_n\right)\le\sum\limits_{n=1}^\infty P(A_n)$.
\end{ena}

Вероятностната мярка $P$ определихме като крайно-адитивна вероятностна мярка,
която е и изброимо-адитивна ($\gs$-адитивна). Всъщност, за една крайна и
крайно-адитивна мярка $P$ следните четири условия са еквивалентни:
\begin{enumerate}[\indent A.]
\item\label{1.A}
$P$ е $\gs$-адитивна.
\item\label{1.B}
$P$ е непрекъсната отгоре: ако $A_n\subseteq A_{n+1}$, $n\ge 1$, $A_n\in\frA$
и $\bigcup\limits_{n=1}^\infty A_n\in\frA$, то $\lim\limits_{n\to\infty}P(A_n)=
P\left(\bigcup\limits_{n=1}^\infty A_n\right)$.
\item\label{1.C}
$P$ е непрекъсната отдолу: ако $A_n\supseteq A_{n+1}$, $n\ge 1$, $A_n\in\frA$
и $\bigcap\limits_{n=1}^\infty A_n\in\frA$, то $\lim\limits_{n\to\infty}P(A_n)=
P\left(\bigcap\limits_{n=1}^\infty A_n\right)$.
\item\label{1.D}
$P$ е непрекъсната в нулата: ако $A_n\supseteq A_{n+1}$, $n\ge 1$, $A_n\in\frA$
и $\bigcap\limits_{n=1}^\infty A_n=\es$, то $\lim\limits_{n\to\infty}P(A_n)=0$.
\end{enumerate}

В~\cite{1} е доказано, че \ref{1.A}${}\Leftrightarrow{}$\ref{1.D}.
Предоставяме на читателя да докаже, че
\ref{1.C}${}\Leftrightarrow{}$\ref{1.D},
\ref{1.A}${}\Leftrightarrow{}$\ref{1.C}
и
\ref{1.B}${}\Leftrightarrow{}$\ref{1.C}.

При всички споменати по-горе свойства на вероятността ние изрично изискваме
при $A_n\in\frA$, $n\ge 1$, да имаме $\bigcup\limits_{n=1}^\infty A_n\in\frA$.
Поради това, а и по други причини, за които стана дума по-горе, по-добре е да
разглеждаме вероятността $P$ като дефинирана не в алгебра $\frA$,
а в $\gs$-алгебра $\calF$. Основната тройка от обекти, която се разглежда в
теорията на вероятностите, е $\OFP$, където
\begin{itemize}
\renewcommand\labelitemi{---}
\item
$\gO$ е съвкупността от елементарни събития $\go$,
\item
$\calF$ е някаква $\gs$-алгебра от подмножества на $\gO$,
\item
$\bbP$ е вероятност, дефинирана в $\calF$.
\end{itemize}
Тройката $\OFP$ се нарича вероятностно пространство.

\textbf{Измерими пространства.}
Основен елемент на едно измеримо пространство $(\gO,\calF)$ е $\gs$-алгебрата
$\calF$. Ще разгледаме основните твърдения относно построяването на $\gs$-алгебри
и примери на някои по-важни измерими пространства.

Ако	$A\subseteq\gO$, то съвкупността $\calF_A=\{A,\ol A,\es,\gO\}$,
както лесно може да се провери, е алгебра и $\gs$-алгебра. $\calF_A$ се нарича
$\gs$-алгебра, породена от подмножеството $A$.

Този пример е частен случай на алгебра, породена от разбиване на $\gO$
на непресичащи се подмножества. Именно, ако
\[
\calA=\{A_1,A_2,\dots\},\ A_i\cap A_j=\es,\ i\ne j
\text{ и }
\gO=\sum_{j=1}^\infty A_j
\]
то съвкупността	$\frA=\ga(\calA)$, образувана от елементите на $\calA$,
всичките им крайни обединения и техните допълнения, е алгебра. Изобщо
вярно е следното твърдение.

\begin{lemma}\label{l:1.1}
Нека $\calC$ е произволен клас от подмножества на $\gO$. Тогава съществуват
най-малка алгебра $\frA=\ga(\calC)$ и най-малка $\gs$-алгебра $\calF=\gs(\calC)$,
съдържащи всички елементи на $\calC$.
\end{lemma}

\begin{proof}
Класът от всички подмножества на $\gO$ е очевидно $\gs$-алгебра (и алгебра).
Така че поне една алгебра и една $\gs$-алгебра, съдържащи класа $\calC$,
съществуват. Образуваме системата $\ga(\calC)$ (съответно $\gs(\calC)$)
от множества, принадлежащи на всяка алгебра (на всяка $\gs$-алгебра), която
съдържа $\calC$. Лесно се проверява че тази система е алгебра (съответно
$\gs$-алгебра), при това най-малката алгебра ($\gs$-алгебра), която съдържа
$\calC$.
\end{proof}

\textbf{Пространство $(\R,\calB)$.}
При разглеждане на различни твърдения $\gO$ може да съвпада с реалната права 
$\R$~"--- съвкупността на всички реални числа. Нека $\calC$ е класът от всички 
интервали (отворени, затворени или полуотворени, крайни или безкрайни). 
Обикновено $\gs$-алгебрата $\calB=\gs(\calC)$, породена от класа $\calC$, 
се нарича борелова $\gs$-алгебра в $\R$. Тъй като всеки интервал в $R$ е изброимо 
сечение на отворени интервали, а всяко отворено множество в $\R$ е изброимо 
обединение на отворени интервали, то $\calB$ съвпада с най-малката $\gs$-алгебра,
съдържаща всички отворени подмножества в $\R$. Елементите на $\calB$ се наричат 
борелови множества.

\textbf{Пространство $(\R^n,\calB(\R^n))$.}
Нека $\R^n=\R\times\R\times\dots\times\R$ е $n$-тата декартова степен на $\R$.
Елементи на $\R^n$ са $n$-мерните вектори $\bx=(x_1,\dots,x_n)$, $x_k\in\R$,
$k=1,\dots,n$. Множеството $\Pi=I_1\times I_2\times\dots\times I_n$, където
$I_k=(a_k,b_k]$, $k=1,\dots,n$, се нарича правоъгълник. Нека $\calP$ е
съвкупността от всички правоъгълници. $\gs$-алгебрата $\gs(\calP)$, породена
от класа $\calP$, се нарича	борелова $\gs$-алгебра в $\R$ и се означава с
$\calB(\R^n)$, $n\ge 1$, $\calB(\R^1)=\calB$.

\textbf{Пространство $(\R^\infty,\calB(\R^\infty))$.}
Това пространство играе важна роля в теорията на вероятностите, понеже е модел
на безбройно много опити. $\R^\infty$ е съвкупността от	 всички числови	редици
$\bx=(x_1,x_2,\dots)$ с $x_n\in\R$, $n=1,2,\dots$, а $\gs$-алгебрата
$\calB(\R^\infty)$ се конструира по следния начин. Нека $B^n$ е борелово
множество от $\calB(\R^n)$. Множеството
$\scrC(B^n)=\{\bx\colon(x_1,\dots,x_n)\in B^n\}$ се нарича цилиндър с основа
$B^n$ в $\R^n$. Тъй като $B^n\times\R\in\calB(\R^{n+1})$, то всеки цилиндър
$\scrC(B^n)$ е и цилиндър с основа в $\R^{n+1},\R^{n+2},\dots$
Системата от цилиндри $\scrC(B^n)$, $n\ge 1$, е алгебра в $\R^\infty$
(вж. Лема~1, гл.~З). Най-малката $\gs$-алгебра, съдържаща всички   %\ref
цилиндри, се бележи с $\calB(\R^\infty)$.

\textbf{Пространство $(R^T,\calB(R^T))$.}
Нека $T=[0,\infty)$ (или $T$ е произволно множество). Пространство $R^T$
се нарича съвкупността от реалните функции $x=x(t)$, $t\in T$. За построяване
на съответната $\gs$-алгебра разглеждаме "`цилиндрите"'	
\begin{gather*}
\scrC(I_1\times I_2\times\dots\times I_n,t_1,t_2,\dots,t_n)=
\{x\in R^T\colon x(t_k)\in I_k, k=1,\dots,n\},\\
t_k\in T,
\quad
I_k=(a_k,b_k],
\quad
k=1,\dots,n.
\end{gather*}
Един цилиндър от горния вид е съвкупността от всички функции $x=x(t)$, $t\in T$,
който в "`моментите"' $t_1,\dots,t_n$ минават през "`прозорците"' $I_1,\dots,I_n$,
а в останалите моменти приемат произволни реални стойности. $\calB(R^T)$
означава най-малката $\gs$-алгебра, съдържаща всички цилиндри. Тя съвпада
(вж. Лема~2, гл.~З) със $\gs$-алгебрата, породена от цилиндрите     %\ref
\begin{gather*}
\scrC(B^n,t_1,t_2,\dots,t_n)=
\{x\in R^T\colon (x(t_1),\dots,x(t_n))\in B^n\},\\
t_k\in T,\ k=1,\dots,n;
\quad
B^n\in\calB(\R^n).
\end{gather*}

\textbf{Пространство $(C,\calB(C))$.}
Нека $T=[0,1]$ и $C$ е пространството от непрекъснати функции $x=x(t)$, $t\in T$.
Относно равномерната метрика
$\rho(x,y)=\sup\limits_{t\in T}\lvert x(t)-y(t)\rvert$ пространството $C$ е
метрично. Две $\gs$-алгебри могат да се въведат в $C$: $\gs$-алгебрата
$\calB(C)$, породена от цилиндричните множества, и $\gs$-алгебрата $\calB_0(C)$, 
породена от отворените (относно метриката $\rho$) множества. Ние ще покажем, че
$\calB(C)=\calB_0(C)$. Наистина, нека $B=\{x\colon x(t_0)<b\}$ е едно цилиндрично 
множество, $t_0\in T$, $b\in\R$. Множеството $B$ очевидно е отворено, защото
наред с коя да е непрекъсната функция $x_0=x_0(t)$, $t\in T$, то съдържа и
отворената сфера $S(x_0,\eps)=\{x\in C\colon\rho(x,x_0)<\eps\}$ при
$\eps\le b-x_0(t_0)$. Тогава и цилиндърът $\{a\in C\colon x(t_1)<b_1,\dots,
x(t_n)<b_n\}$ при произволни $n\ge 1$ и $t_k\in T$, $b_k\in\R$, $k=1,\dots,n$,
се съдържа в $\calB_0(C)$. Следователно $\calB(C)\subseteq\calB_0(C)$. Обратно, 
поради непрекъснатостта на функциите от $C$ имаме
\[
\begin{split}
S(x_0,\eps)&=\left\{x\in C\colon\sup_{t\in T}\lvert x(t)-x_0(t)\rvert<\eps\right\}\\
&=\bigcap_{k=1}^\infty\{x\in C\colon\lvert x(r_k)-x_0(r_k)\rvert<\eps\}\in\calB(C),
\end{split}
\]
където $r_k$, $k=1,\dots$, са всички рационални числа в $T=[0,1]$.
Следователно $\calB_0(C)\subseteq\calB(C)$, с което съвпадането на двете 
$\gs$-алгебри е доказано.

\textbf{Пространство $(D,\calB(D))$.} 
Нека $T=[0,1]$ и $D$ е съвкупността от непрекъснатите отдясно функции $x=x(t)$,
$t\in T$. И в този случай могат да се въведат две $\gs$-алгебри в $D$, които 
съвпадат. Едната е породената от цилиндричните множества, а другата "--- от 
отворените (относно метриката на А.~В.~Скороход) множества. На доказателството 
на този факт няма да се спираме.

\textbf{Теорема за продължение на вероятността.}
Нека $P$ е вероятност, дефинирана в някоя алгебра $\frA$ от подмножества на 
$\gO$ и $\calF=\gs(\frA)$ е най-малката $\gs$-алгебра, съдържаща $\frA$. 
Тъй като ние определихме вероятността $P$ като изброимо-адитивна и нормирана
мярка \emph{само} в алгебрата $\frA$, то възниква въпросът: може ли да
определим вероятностна мярка $\bbP$ в $\calF$ така, че $\bbP(A)=P(A)$ за всяко
$A\in\frA$? Всяка такава вероятностна мярка $\bbP$ ще наричаме продължение на 
вероятността $P$ от алгебрата $\frA$ в $\gs$-алгебрата $\calF=\gs(\frA)$, а
мярката $P$ "--- ограничение на $\bbP$ в $\frA$. Положителен отговор на
въпроса за съществуване и единственост на продължението $\bbP$ дава
следната класическа теорема.

\begin{Theorem}[Каратеодори]
Всяка вероятност $P$, дефинирана в някоя алгебра $\frA$ от подмножества на
$\gO$, притежава единствено продължение $\bbP$ в $\gs$-алгебрата 
$\calF=\gs(\frA)$, породена от $\frA$. 
\end{Theorem}

\begin{proof}
Отначало ще продължим $P$ само в класа $g$, чиито елементите са или елементи 
на $\frA$, или граници на растящи редици от елементи на $\frA$. Елементите на 
$g$ ще бележим с $G$. 

Определяме функция $\pi(G)$ за $G\in g$ по следния начин:
\[
\pi(G)=
\begin{cases}
P(G),&\text{ако $G\in\frA$,}\\
\lim P(A_n),&\text{ако $G=\uparrow\lim A_n=\bigcup\limits_{n=1}^\infty A_n$;
$A_{n+1}\supseteq A_n\in\frA$, $n\ge 1$.}
\end{cases}
\]
Ще покажем, че стойността $\pi(G)$ не зависи от избора на редицата $A_n$, 
$n\ge 1$, а се определя само от избора на множеството $G$. Наистина, нека
$A_n$, $n\ge 1$, и $B_m$, $m\ge 1$, са две растящи редици от елементи на
$\frA$, определящи едно и също $G$. Да предположим, че $\lim P(A_n)=\pi^*(G)$,
$\lim P(B_m)=\pi(G)$. Тъй като редицата $A_n\cap B_m$, $n\ge 1$, също монотонно
расте и 
\[
\bigcup_{n=1}^\infty(A_n\cap B_m)=G\cap B_m=B_m\in\frA,
\quad
m\ge 1,
\]
то поради непрекъснатостта на $P$ отгоре имаме
\[
\lim_n P(A_n\cap B_m)=P(B_m),
\]
откъдето
\[
\lim_n P(A_n)\ge P(B_m),
\quad
m\ge 1.
\]

От последното неравенство при $m\to\infty$ получаваме неравенството	\lb
$\pi^*(G)\ge\pi(G)$. Разглеждайки редицата $A_n\cap B_m$, $m\ge 1$,
аналогично получаваме неравенство в обратна посока. Следователно
$\pi^*(G)=\pi(G)$. По определение $\pi$ съвпада с $P$ в $\frA$.

Лесно се вижда, че функцията $\pi$ има следните свойства:
\begin{ena}
\item
$\pi(\gO)=1$, $\pi(\es)=0$;
\item
ако $G_1\subseteq G_2$, то $\pi(G_1)\le\pi(G_2)$;
\item
$0\le\pi(G)\le 1$ за всяко $G\in g$;
\item
ако $G_1,G_2\in g$, то $G_1\cup G_2\in g$, $G_1\cap G_2\in g$ и
$\pi(G_1\cup G_2)+\pi(G_1\cap G_2)=\pi(G_1)+\pi(G_2)$;
\item
ако $G_n\in g$ и $G_n\subseteq G_{n+1}$, $n\ge 1$, то
$\uparrow\lim G_n=G\in g$ и $\pi(G)=\lim\pi(G_n)$.
\end{ena}

Доказателството на тези свойства е подобно на доказателството на аналогичните
свойства на $P$ и използва това, че $P$ е вероятност в $\frA$. Затова го
предоставяме на читателя.

За да продължим вероятността $P$ от $\frA$ в $\gs$-алгебрата $\calF=\gs(\frA)$,
породена от $\frA$, първо ще дефинираме чрез $\pi$ една числова функция $\ol\pi$
в класа на всички подмножества на $\gO$. 

\begin{lemma}\label{l:1.2}
Функцията $\ol\pi(\gO_1)$, $\gO_1\subseteq\gO$, определена чрез равенството
\[
\ol\pi(\gO_1)=\inf_{G}\{\pi(G),\gO_1\subseteq G\in g\},
\]
има следните свойства: 
\begin{enumerate}[\indent\rm1.]
\item
$\ol\pi(G)=\pi(G)$ при $G\in g$; $0\le\ol\pi(\gO_1)\le 1$ за всяко  
$\gO_1\subseteq\gO$.
\item
$\ol\pi(\gO_1\cup\gO_2)+\ol\pi(\gO_1\cap\gO_2)\le\ol\pi(\gO_1)+\ol\pi(\gO_2)$
за произволни $\gO_1,\gO_2\subseteq\gO$ и, в частност (при $\gO_2=\ol\gO_1$),\
\[
\ol\pi(\gO_1)+\ol\pi(\ol\gO_1)\ge 1.
\]
\item
Ако $\gO_1\subseteq\gO_2$, то $\ol\pi(\gO_1)\le\ol\pi(\gO_2)$.
\item
Ако $\gO_n\subseteq\gO_{n+1}$, $n\ge 1$, и $\gO_\infty=\uparrow\lim\gO_n$,
то $\ol\pi(\gO_\infty)=\lim\ol\pi(\gO_n)$.
\end{enumerate}
\end{lemma}

\begin{proof}
Свойство~1 следва непосредствено от дефиницията на $\ol\pi$.
За да докажем свойство ~2 да вземем произволно $\eps>0$ и да
изберем такива $G_1$ и $G_2$ от $g$, че
\[
\ol\pi(\gO_i)+\frac\eps2\ge\pi(G_i)
\text{ при }
\gO_i\subseteq G_i,\ i=1,2.
\]
Тогава според свойството г) на функцията $\pi$ имаме
\[
\begin{split}
\ol\pi(\gO_1)+\ol\pi(gO_2)+\eps &\ge \pi(G_1)+\pi(G_2) \\
&=
\pi(G_1\cup G_2)+\pi(G_1\cap G_2) \ge
\ol\pi(\gO\cup\gO_2)+\ol\pi(\gO_1\cap\gO_2).
\end{split}
\]
При $\eps\to 0$ това съотношение дава свойство~2. 
Свойство~3 следва веднага от монотонността (свойство б)) на $\pi$.

За да докажем свойство~4 да изберем пак произволно положително число $\eps$
и редица $0<\eps_n$, $n\ge 1$, за която $\sum\limits_{n=1}^\infty\eps_n=\eps$. 
При дадени $\eps_n$ и $\gO_n$ определяме $G_n\in g$ така, че 
\[
\ol\pi(\gO_n)+\eps_n\ge\pi(G_n),
\quad
\gO_n\in G_n,\ n\ge 1.
\]
Да положим сега $\wt{G}_n\bigcup\limits_{m=1}^n G_m$. Очевидно членовете на
редицата $\wt{G}_n$, $n\ge 1$, са от $g$ и$\gO_n\subseteq\wt{G}_n$ за всяко 
$n\ge 1$. Ще покажем с индукция по $n$, че
\[
\ol\pi(\\gO_n)+\sum_{m=1}^n\eps_m\ge\pi(\wt{G}_n),\ n\ge 1.
\]
При $n=1$ това неравенство е вярно според избора на $G_1$.
Да предположим, че то е вярно за някое $n\ge 1$. Тъй като
$\gO_n\subseteq\wt{G}_n\cup G_{n+1}$, то по свойство~г) имаме
\[
\begin{split}
\pi\left(\wt{G}_{n+1}\right)&=\pi\left(\wt{G}_n\cup G_{n+1}\right)=
\pi\left(\wt{G}_n\right)+\pi(G_{n+1})-\pi\left(\wt{G}_n\cap G_{n+1}\right)\\
&=\ol\pi(\gO_n)+\sum_{m=1}^n\eps_m+\ol\pi(\gO_{n+1})+\eps_{n+1}-\ol\pi(\gO_n)\\
&=\ol\pi(\gO_{n+1})+\sum_{m=1}^{n+1}\eps_m.
\end{split}
\]
и, следователно, доказваното неравенство е вярно и за $n+1$.

Нека $n\to\infty$. Като отчетем, че $\gO_\infty\subseteq\lim\wt G_n$ и също така 
$\wt G_n\uparrow\lim\wt G_n\in g$, ще получим
\[
\lim\ol\pi(\gO_n)+\eps\ge\pi(\lim\wt G_n)\ge\ol\pi(\gO_\infty)
\]
или при $\eps\to 0$
\[
\lim\ol\pi(\gO_n)\ge\ol\pi(\gO_\infty).
\]
От друга страна, от доказаното вече свойство~3 следва и обратното на последното
неравенство, с което свойство~4 е доказано.
\end{proof}

Да разгледаме сега функцията $\ol\pi$ не за произволни подмножества на $\gO$,
а само за елементите на съвкупността 
\[
\ol\calF=\{B\in\gO\colon \ol\pi(B)+\ol\pi(\ol B)=1\}.
\]

Ще докажем следното важно твърдение. 

\begin{lemma}\label{l:1.3}
Съвкупността $\ol\calF$ е $\gs$-алгебра и $\ol\pi$ е вероятност в $\ol\calF$. 
\end{lemma}

\begin{proof}
Да покажем първо, че  $\ol\calF$ е $\gs$-алгебра. Според определението на 
$\ol\calF$ от $B\in\ol\calF$ следва $\ol B\in\ol\calF$. От свойство~1 на 
$\ol\pi$ имаме $\ol\pi(\es)+\ol\pi(\gO)=1$ и, следователно, $\es\in\ol\calF$
и $\gO\in\ol\calF$. Ако  $B_1,B_2\in\ol\calF$, то сумата от десните страни на 
неравенствата 
\begin{align*}
\ol\pi\left(B_1\cup B_2\right)+\ol\pi\left(B_1\cap B_2\right)&\le
\ol\pi(B_1)+\ol\pi(B_2),\\
\ol\pi\left(\ol{B_1\cup B_2}\right)+\ol\pi\left(\ol{B_1\cap B_2}\right)&\le
\ol\pi(\ol B_1)+\ol\pi(\ol B_2),
\end{align*}
е равна на $2$. Но според свойство~2 на $\ol\pi$ имаме
\begin{align*}
\ol\pi\left(B_1\cup B_2\right)+\ol\pi\left(\ol{B_1\cup B_2}\right)&\ge 1,\\
\ol\pi\left(B_1\cap B_2\right)+\ol\pi\left(\ol{B_1\cap B_2}\right)&\ge 1,
\end{align*} 

Горните четири неравенства могат да бъдат верни само когато всички те са 
равенства. Следователно $B_1\cup B_2\in\ol\calF$, $B_1\cap B_2\in\ol\calF$.
С това същевременно показахме, че функцията $\ol\pi$ е адитивна в $\ol\calF$.

Остава ни да се убедим, че операцията $\cup$, приложена изброимо много пъти 
за елементи от $\ol\calF$, не ни извежда извън $\ol\calF$.
Нека $B_n$, $n\ge 1$, е растяща редица от множества $B_n\in\ol\calF$,
$B_n\in B_{n+1}$. От свойства~3 и~4 на $\ol\pi$ следва, че 
\[
\ol\pi\left(\bigcup_{n=1}^\infty B_n\right)=
\lim\ol\pi(B_n),
\quad
\ol\pi\left(\ol{\bigcup_{n\ge 1}B_n}\right)\le\ol\pi\left(\ol B_m\right)
\text{ при $m\ge 1$.}
\]

Като съберем съответните страни на тези две съотношения и оставим $m\to\infty$,
получаваме 
\[
\ol\pi\left(\bigcup_{n\ge 1}B_n\right)+
\ol\pi\left(\ol{\bigcup_{n\ge 1}B_n}\right)\le 1.
\]
Последното неравенство съгласно свойство~2 е равенство и, следователно 
$\bigcup\limits_{n\ge 1}B_n\in\ol\calF$, което показва, че $\ol\calF$
е $\gs$-алгебра.

За да завършим доказателството на лемата остава да докажем, че $\ol\pi$ е 
вероятност в $\ol\calF$. Наистина, $\ol\pi(\gO)=\pi(\gO)=1$.
Вече показахме, че $\ol\pi$ е адитивна функция. Остава да проверим 
непрекъснатостта на $\ol\pi$ в нулата. Ако $A_n\downarrow\es$, $A_n\in\ol\calF$,
то ще имаме $\bigcup\limits_{n\ge 1}\ol A_n=\gO$ и според доказаното по-горе при 
$B_n=\ol A_n$, $n\ge 1$, получаваме веднага 
$\lim\limits_{n\to\infty}\ol\pi(\ol A_n)=
\ol\pi\left(\bigcup\limits_{n\ge 1}\ol A_n\right)=1$.
Но тъй като $\ol\pi(A_n)+\ol\pi\left(\ol A_n\right)=1$, 
то $\ol\pi(A_n)\downarrow 0$.

И така, $\ol\pi$ е вероятност в $\ol\calF$.
Лема~\ref{l:1.3} е доказана. 
\end{proof}

За доказателството на теоремата да забележим, че от определенията на функциите
$\pi$ и $\ol\pi$ следват равенствата $\ol\pi(A)=\pi(A)=P(A)$, $A\in\frA$, 
\te $\ol\pi(A)+\ol\pi\left(\ol A\right)=1$, или алгебрата $\frA$ се съдържа в 
$\gs$-алгебрата $\ol\calF$. Но $\gs$-алгебрата $\calF=\gs(\frA)$ е най-малката
$\gs$-алгебра, съдържаща $\frA$. Следователно $\calF\subseteq\ol\calF$. 
Разглеждайки вероятността $\ol\pi$ само за елементите на $\calF$ (те са част от
тези на $\ol\calF$), да означим $\bbP(A)=\ol\pi(A)$, $A\in\calF$.
Ограничението $\bbP$ на $\ol\pi$ в $\calF$ е търсеното продължение на $P$
от алгебрата $\frA$ в $\gs$-алгебрата $\calF$, породена от $\frA$, защото 
очевидно $\bbP(A)=P(A)$ при $A\in\frA$.
  
Продължението $\bbP$ е единствено. За да докажем това, нека предположим, че има 
друга вероятност $\bbQ$ в $\calF$, която съвпада с $P$ в $\frA$. Вижда се лесно, 
че $\bbQ(G)=\pi(G)$ при $G\in g$ и, следователно, $\bbQ(A)\le\bbP(A)$ за всяко
$A\in\calF$. Ако за някое $A\in\calF$ имаме строго неравенство $\bbQ(A)<\bbP(A)$, 
то получаваме $1=\bbQ(\gO)=\bbQ(A)+\bbQ\left(\ol A\right)<
\bbP(A)+\bbP\left(\ol A\right)=1$, което е невъзможно. С това теоремата е доказана.
\end{proof}

Теоремата за продължение на вероятността показва, че за да дефинираме вероятност 
$\bbP$ в едно измеримо пространство $(\gO,\calF)$ е достатъчно да определим 
ограничението $P$ на $\bbP$ в коя да е алгебра $\frA$ от подмножества на $\gO$, 
която поражда $\calF$ (\te има свойството $\gs(\frA)=\calF$).

Да напомним, че функцията $\ol\pi$, която е построена по $P$ и обикновено се 
нарича външна мярка, е дефинирана за произволни $\gO_1\subseteq\gO$.
Ограничението $\ol\bbP$ на $\ol\pi$ в $\ol\calF$ е вероятност, представляваща
продължение на $\bbP$ от $\calF$ в $\ol\calF$. Самата $\gs$-алгебра $\ol\calF$
съдържа, в частност, всички подмножества $N\subseteq\gO$, за които $\ol\pi(N)=0$
и, следователно, $\ol\bbP(N)=0$. Тези множества се наричат $\bbP$-нулеви.
Казва се, че $\ol\calF$ е попълнение на $\calF$ относно мярката $\bbP$, че 
$(\gO,\ol\calF,\ol\bbP)$ е пълно вероятностно пространство и попълнение на
\OFP.

\begin{problems}
\begin{pr}\label{pr:1.1}
За всеки две измерими пространства $(\gO_1,\calF_1)$ и $(\gO_2,\calF_2)$
да означим с $\calF_1\oplus\calF_2=\gs\{A_1\times A_2\colon 
A_1\in\calF_1,A_2\in\calF_2\}$ естествената $\gs$-алгебра в $\gO_1\times\gO_2$.
Докажете, че $\calB(\R^n)\times\calB=\calB(\R^{n+1})$, $n\ge 1$.
\end{pr}

\begin{pr}\label{pr:1.2}
Докажете, че $\calB(\R^n)$ е най-малката $\gs$-алгебра, съдържаща отворените 
множества в $\R^n$, $n\ge 2$.
\end{pr}

\begin{pr}\label{pr:1.3}
Докажете, че $\calB(\R^\infty)$ е най-малката $\gs$-алгебра, съдържаща
отворените множества относно метриката $\rho(x',x'')=
\sum\limits_{n\ge 1}2^{-n}\lvert x'_n-x''_n\rvert$ в $\R^\infty$.
\end{pr}

\begin{pr}\label{pr:1.4}
Класът $\calC$ от подмножества на $\gO$ се нарича монотонен, ако за всяка 
редица $A_n\in\calC$, $n\ge 1$, от $A_n\subseteq A_{n+1}$, $n\ge 1$, следва 
$\uparrow\lim A_n=\bigcup\limits_{n\ge 1}A_n\in\calC$  и от 
$A_n\supseteq A_{n+1}$, $n\ge 1$, следва 
$\downarrow\lim A_n=\bigcap\limits_{n\ge 1}A_n\in\calC$.
Докажете, че за произволен клас $\frA$ от подмножества на $\gO$:
\begin{enumerate}[\indent A.]
\item
съществува най-малък монотонен клас $m(\frA)\supseteq\frA$;
\item
ако $\frA$ е алгебра, то $\frA$ е $\gs$-алгебра тогава и само тогава, когато
$\frA$ е монотонен клас;
\item
ако $\frA$ е алгебра, то $\gs(\frA)=m(\frA)$.
\end{enumerate} 
\end{pr}

\begin{pr}\label{pr:1.5}
Класът $\calC$ от подмножества на $\gO$ се нарича $\gs$-адитивен, ако:
\begin{ena}
\item
$\gO\in\calC$;
\item
за произволни $C_1,C_2\in\calC$ 
от $C_1\cap C_2=\es$ следва $C_1+C_2\in\calC$
и от $C_1\subseteq C_2$ следва $C_2\setminus C_1=C_2\cap\ol C_1\in\calC$;
\item
от $C_{n+1}\supseteq C_n\in\calC$, $n\ge 1$, следва $\uparrow\lim C_n=
\bigcup\limits_{n\ge 1}C_n\in\calC$.
и
\end{ena}
Докажете, че за произволен клас $\frA$ от подмножества на $\gO$:
\begin{enumerate}[\indent A.]
\item
съществува най-малък $\gs$-адитивен клас $s(\frA)\supseteq\frA$;
\item
ако $\frA$ е затворен относно $\cap$, то $s(\frA)=\gs(\frA)$;
\item
ако $\frA$ е затворен относно $\cap$, то всеки две вероятности
$\bbP$ и $\bbQ$, за които $\bbP(A)=\bbQ(A)$, $A\in\frA$, 
съвпадат в $\gs(\frA)$.
\end{enumerate}
\end{pr}

\begin{pr}\label{pr:1.6}
Нека \OFP\ е вероятностно пространство и $\frA$ е алгебра, за която
$\gs(\frA)=\calF$. Докажете, че за всяко $B\in\calF$ и произволно $\eps>0$
съществува $A\in\frA$ такова, че $\bbP(A\mathop{\triangle}B)<\eps$, където
$A\mathop{\triangle}B=A\cap\ol B+\ol A\cap B$.
\end{pr}

\begin{pr}\label{pr:1.7}
Нека $\bbP$ е произволна вероятност в $(\R^n,\calB(\R^n))$, $n\ge 1$.
Докажете, че за всяко $B\in\calB(\R^n)$ и всяко $\eps>0$ съществува 
ограничено и затворено множество $F\subseteq B$ такова, 
че $\bbP(B\setminus F)<\eps$.
\end{pr}

\begin{pr}\label{pr:1.8}
Нека $\bbP$ е произволна вероятност в $(\R^n,\calB(\R^n))$, $n\ge 1$,
$F$ произволно затворено множество и $G$ е произволно отворено множество 
в $\R^n$. Докажете, че $\bbP(B)=\sup\limits_{F\subseteq B}\bbP(F)=
\inf\limits_{G\supseteq B}\bbP(G)$, $B\in\calB(\R^n)$.
\end{pr}

\begin{pr}\label{pr:1.9}
Нека $(\gO_1,\calF_1,\bbP_1)$ и $(\gO_2,\calF_2,\bbP_2)$ са две вероятностни 
пространства. Докажете, че:
\begin{enumerate}[\indent A.]
\item
съвкупността $\frA$ от крайни суми на непресичащи се множества от вида
$A_1\times A_2$, $A_1\in\calF_1$, $A_2\in\calF_2$, е алгебра в 
$\gO_1\times\gO_2$.
\item
формулата $P(A_1\times A_2)=\bbP_1(A_1)\bbP_2(A_2)$ и изискването за адитивност
на функцията $P$ определят вероятностна мярка $P$ в алгебрата $\frA$.
\end{enumerate}
Продължението $\bbP$ на мярката $P$ от $\frA$ в $\calF_1\otimes\calF_2=
\gs(\frA)$ (зад.~\ref{pr:1.1}) се нарича произведение на вероятностите 
$\bbP_1$ и $\bbP_2$, а вероятностното пространство 
$(\gO_1\times\gO_2,\calF_1\otimes\calF_2,\bbP_1\times\bbP_2)$ "--- произведение
на двете изходни вероятностни пространства.
\end{pr}
\end{problems}